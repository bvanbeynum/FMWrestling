{"version":3,"file":"426.js","mappings":"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","sources":["webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://thewrestlingmill/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://thewrestlingmill/./client/portal/lineup-worker.js"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nfunction _toConsumableArray(r) {\n  return arrayWithoutHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableSpread();\n}\nexport { _toConsumableArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return arrayLikeToArray(r);\n}\nexport { _arrayWithoutHoles as default };","function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nexport { _iterableToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableSpread as default };","const findBestLineup = (weightClassIndex, usedWrestlers, memo, allMatchups, timesCalled) => {\n\tif (weightClassIndex >= allMatchups.length) {\n\t\treturn { wins: 0, lineup: [] };\n\t}\n\ttimesCalled = (timesCalled || 0) + 1;\n\n\tconst usedWrestlersKey = Array.from(usedWrestlers).sort().join(',');\n\tconst memoKey = `${weightClassIndex}:${usedWrestlersKey}`;\n\t\n\tif (memo.has(memoKey)) {\n\t\treturn memo.get(memoKey);\n\t}\n\n\tconst currentWeightClass = allMatchups[weightClassIndex];\n\tconsole.log(`${ new Date().toLocaleString() }: ${timesCalled} - W: ${currentWeightClass.name}`)\n\n\tlet bestSubResult = findBestLineup(weightClassIndex + 1, usedWrestlers, memo, allMatchups, timesCalled);\n\tlet lineup = [{ ...currentWeightClass, selectedWrestler: null }, ...bestSubResult.lineup];\n\tlet maxWins = bestSubResult.wins;\n\n\tconst eligibleWrestlers = currentWeightClass.team\n\t\t.filter(w => !usedWrestlers.has(w.id))\n\t\t.sort((a, b) => b.rating - a.rating);\n\n\tfor (const wrestler of eligibleWrestlers) {\n\t\tconst isWin = wrestler.rating > currentWeightClass.opponentRating;\n\t\tconst bestPossibleWins = (isWin ? 1 : 0) + (allMatchups.length - (weightClassIndex + 1));\n\n\t\tif (bestPossibleWins < maxWins) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst newUsedWrestlers = new Set(usedWrestlers);\n\t\tnewUsedWrestlers.add(wrestler.id);\n\n\t\tconst subResult = findBestLineup(weightClassIndex + 1, newUsedWrestlers, memo, allMatchups, timesCalled);\n\t\tconst currentWins = (isWin ? 1 : 0) + subResult.wins;\n\n\t\tif (currentWins > maxWins) {\n\t\t\tmaxWins = currentWins;\n\t\t\tlineup = [{ ...currentWeightClass, selectedWrestler: wrestler }, ...subResult.lineup];\n\t\t\t// console.log(`${new Date().toLocaleString()}: Level ${weightClassIndex} / ${timesCalled}: Picked ${wrestler.name} for weight ${currentWeightClass.name}`);\n\t\t}\n\t}\n\n\tconst result = { wins: maxWins, lineup: lineup };\n\tmemo.set(memoKey, result);\n\treturn result;\n};\n\nself.onmessage = function(e) {\n\tconst { matchups } = e.data;\n\tconst memo = new Map();\n\tconst { lineup } = findBestLineup(0, new Set(), memo, matchups);\n\tself.postMessage({ lineup });\n};"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_defineProperty","e","r","t","i","toPrimitive","call","TypeError","String","toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","_arrayLikeToArray","a","length","n","Array","_toConsumableArray","isArray","from","toString","slice","name","test","findBestLineup","weightClassIndex","usedWrestlers","memo","allMatchups","timesCalled","wins","lineup","usedWrestlersKey","sort","join","memoKey","concat","has","get","currentWeightClass","console","log","Date","toLocaleString","_step","bestSubResult","_objectSpread","selectedWrestler","maxWins","_iterator","_createForOfIteratorHelper","team","filter","w","id","b","rating","s","done","wrestler","isWin","opponentRating","newUsedWrestlers","Set","add","subResult","currentWins","err","f","result","set","self","onmessage","matchups","data","Map","postMessage"],"sourceRoot":""}